<ng-container *ngIf="loading">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-container>
<div class="banner">
  <div *ngIf="!loading" class="products-block">
    <ng-container *ngFor="let product of productsArr; let i = index">
      <div
        (mouseenter)="autoHover[i] = true"
        (mouseleave)="autoHover[i] = false"
        class="card"
        style="width: 192px; height: 240px"
      >
        <!-- <img
          [src]="product['images'][0]['url']"
          class="card-img-top"
          alt="..."
        /> -->
        <carousel
          [arrows]="autoHover[i]"
          class="carousel-block"
          objectFit="cover"
          [width]="192"
          [height]="130"
          [margin]="15"
          [cellWidth]="192"
        >
          <ng-container
            *ngFor="
              let img of product['images']
                | paginate
                  : {
                      id: 'my-pg',
                      itemsPerPage: totalData.limit,
                      currentPage: totalData.page,
                      totalItems: totalData.totalResults
                    }
            "
          >
            <div class="carousel-cell previewimg">
              <img src="{{ img.url }}" />
              <!-- <div style="cursor: pointer" title="Delete">
                <svg
                (click)="
                    openConfirmationDialog(product.name, product._id, i);
                    $event.stopPropagation()
                  "
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  fill="currentColor"
                  class="bi bi-x-circle-fill dlt-btn"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .carousel-cells708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"
                  />
                </svg>
              </div> -->
            </div>
          </ng-container>
        </carousel>
        <div class="card-body">
          <h5 class="card-title">
            <a
              class="prod-title"
              [routerLink]="['/products/details', product._id]"
              >{{ product.name }}</a
            >
          </h5>
          <p class="card-text">
            {{ product.description | shorten: 40:"..." }}
          </p>
        </div>
        <a
          title="Delete"
          class="remove-image"
          (click)="
            openConfirmationDialog(product.name, product._id, i);
            $event.stopPropagation()
          "
          style="display: inline"
          >&#215;</a
        >
      </div>
    </ng-container>
  </div>
  <div class="pagination-block" *ngIf="!loading && !empty">
    <div>
      <!-- <nav aria-label="...">
        <ul class="pagination">
          <li class="page-item disabled">
            <a class="page-link">Previous</a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item active" aria-current="page">
            <a class="page-link" href="#">2</a>
          </li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav> -->
      <pagination-controls
        id="my-pg"
        (pageChange)="pageChanged($event)"
      ></pagination-controls>
    </div>
  </div>
  <div *ngIf="empty">
    <p class="empty-block">No Products To Show...</p>
  </div>
</div>

<!-- <mat-card [routerLink]="['/products/details', product._id]"  class="card">
    <img mat-card-image [src]="product['images'][0]['url']" alt="" />
    <mat-card-header>
      <mat-card-title>{{product.name}}</mat-card-title>
      <mat-card-subtitle>{{product.description}}</mat-card-subtitle>
    </mat-card-header>
  </mat-card> -->
<!-- || 'https://via.placeholder.com/150' -->
